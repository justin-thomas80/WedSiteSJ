var mainMod=angular.module("SandJ",["ui.router","uiGmapgoogle-maps"]);mainMod.config(["$stateProvider","$urlRouterProvider","uiGmapGoogleMapApiProvider","$locationProvider",function(d,b,a,c){c.html5Mode(true);d.state("home",{url:"/",templateUrl:"assets/js/partials/home.html",controller:"homeCtrl"});d.state("ceremony",{url:"/ceremony",templateUrl:"assets/js/partials/ceremony.html",controller:"ceremonyCtrl"});d.state("engagement",{url:"/engagement",templateUrl:"assets/js/partials/engagement.html",controller:"ceremonyCtrl"});d.state("reception",{url:"/reception",templateUrl:"assets/js/partials/reception.html",controller:"ceremonyCtrl"});d.state("contact",{url:"/contact",templateUrl:"assets/js/partials/contact.html",controller:"contactCtrl"});d.state("gifts",{url:"/gifts",templateUrl:"assets/js/partials/gifts.html",controller:"giftsCtrl"});d.state("news",{url:"/news",templateUrl:"assets/js/partials/news.html",controller:"newsCtrl"});d.state("gallery",{url:"/gallery",templateUrl:"assets/js/partials/gallery.html",controller:"galleryCtrl"});d.state("points-of-interest",{url:"/points-of-interest",templateUrl:"assets/js/partials/points-of-interest.html",controller:"pointsOfInterestCtrl"});d.state("polls",{url:"/polls",templateUrl:"assets/js/partials/polls.html",controller:"pollsCtrl"});b.otherwise("/");a.configure({})}]);mainMod.controller("baseCtrl",["$scope","$state",function(a,b){a.closeDrawer=function(){var c=angular.element(document.getElementById("sj-drawer-container"));c.removeClass("is-visible")}}]);mainMod.controller("homeCtrl",["$scope","$state","$location",function(a,b,c){a.$on("$viewContentLoaded",function(d){ga("send","pageview",{page:c.url()})})}]);mainMod.controller("ceremonyCtrl",["$scope","$state","$location",function(a,b,c){a.$on("$viewContentLoaded",function(d){ga("send","pageview",{page:c.url()})})}]);mainMod.controller("contactCtrl",["$scope","$state","$location",function(a,b,c){a.$on("$viewContentLoaded",function(d){ga("send","pageview",{page:c.url()})})}]);mainMod.controller("giftsCtrl",["$scope","$state","$location",function(a,b,c){a.$on("$viewContentLoaded",function(d){ga("send","pageview",{page:c.url()})})}]);mainMod.controller("pollsCtrl",["$scope","$state","$location","$http",function(a,c,f,e){a.$on("$viewContentLoaded",function(g){ga("send","pageview",{page:f.url()})});a.questions=[];a.pollAnswersArr=[];e.get("/api/pollquestions").then(function(g){a.questions=g.data;angular.forEach(a.questions,function(j,h){a.pollAnswersArr[h]={showQuestionContainer:true,showCommentContainer:false,chosenAnswer:"A1",comment:""}})},function(g){console.log("error",g)});a.showCommentsContainer=function(g,h){a.pollAnswersArr[g].showCommentsContainer=h};a.sendAnswers=function(g,j){var h={};h.QID=g;h.A=a.pollAnswersArr[j].chosenAnswer;h.C=a.pollAnswersArr[j].comment;e.post("/api/pollResults",h).success(function(k){a.pollAnswersArr[j].showQuestionContainer=false;var m={};angular.forEach(a.questions,function(o,n){if(o._id===g){m=o}});var l=d(k,m);a.pollAnswersArr[j].graphData=l;b(l,j)}).error(function(k){console.log("Error: "+k)})};function d(l,k){var h={};h.A1=0;h.A2=0;h.A3=0;h.A4=0;h.A5=0;var n=[];var g={labels:[],series:[]};var j=[];var o=0;$.each(l,function(q,p){h[p.A]++;if(p.C){n.push({comment:p.C,commentDate:p.resultDate})}});for(i=1;i<6;i++){var m="A"+i;if(k[m]!==undefined){g.labels.push(k[m]);g.series.push(h[m])}}g.comments=n;return g}function b(n,o){var g={labels:["Mon","Tue","Wed","Thu","Fri"],series:[[5,2,4,2,0]]};var p={fullWidth:true,centerBars:false};var m={series:n.series};var j=function(r,q){return r+q};var k=n.series.reduce(j);var l=[];$.each(n.labels,function(q,r){l.push(r+" ("+Math.round(n.series[q]/k*100)+"%)")});m.labels=l;var h=[["screen and (min-width: 240px)",{chartPadding:15,labelOffset:15,labelDirection:"explode"}],["screen and (min-width: 468px)",{chartPadding:0,labelOffset:35,labelDirection:"explode"}],["screen and (min-width: 1024px)",{labelOffset:35,chartPadding:0,labelDirection:"explode"}]];new Chartist.Pie("#q-chart-"+o,m,{},h)}}]);mainMod.controller("newsCtrl",["$scope","$state","$location",function(a,b,c){a.$on("$viewContentLoaded",function(d){ga("send","pageview",{page:c.url()})})}]);mainMod.controller("galleryCtrl",["$scope","$state","$location",function(a,b,c){a.$on("$viewContentLoaded",function(d){ga("send","pageview",{page:c.url()})});angular.element(document).ready(function(){$("#sj-gallery-container").owlCarousel({lazyLoad:true,autoPlay:false,stopOnHover:true,navigation:false,paginationSpeed:1000,paginationNumbers:true,goToFirstSpeed:2000,singleItem:true,autoHeight:true})})}]);mainMod.controller("pointsOfInterestCtrl",["$scope","$state","uiGmapGoogleMapApi","$location",function(a,b,c,d){a.$on("$viewContentLoaded",function(e){ga("send","pageview",{page:d.url()})});a.map={center:{latitude:-32.999432,longitude:27.9354535},zoom:10};a.gmpMarkers=[{id:"1",latitude:-32.998616,longitude:27.927984,title:"Hoylake Inn",desc:"Where the Thomas Family will be staying",options:{title:"Hoylake Inn"},show:false,onClick:function(){console.log("Clicked!!!!!!!");this.show=!this.show}},{id:"2",latitude:-33.036487,longitude:27.82458,title:"East London Airport",desc:"Flying in and out of here",options:{title:"East London Airport"},show:false,onClick:function(){console.log("Clicked!!!!!!!");this.show=!this.show}},{id:"3",latitude:-32.839027,longitude:28.077665,title:"Inkwenkwezi",desc:"Inkwenkwezi private game reserve is <br>where the reception will take place",options:{title:"Inkwenkwezi Private Game Reserve"},show:false,onClick:function(){console.log("Clicked!!!!!!!");this.show=!this.show}},{id:"4",latitude:-32.972707,longitude:27.882338,title:"St Marks Anglican Church",desc:"The church where the ceremony will take place",options:{title:"St Marks Anglican Church"},show:false,onClick:function(){console.log("Clicked!!!!!!!");this.show=!this.show}}];c.then(function(e){})}]);